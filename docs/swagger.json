{"openapi":"3.0.3","info":{"title":"Klipp API","version":"1.0.0"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{}},"paths":{"/users/register":{"post":{"summary":"Register new user with email/password","tags":["User"],"description":"Creates a new user account. Returns JWT token and user info. If email already exists (e.g., from OAuth), returns error message.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":6},"name":{"type":"string","minLength":2}},"required":["email","password","name"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"taxNumber":{"type":"string","nullable":true},"taxOffice":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"subdivision":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true}},"required":["id","email","name"],"additionalProperties":false},"isNewUser":{"type":"boolean"}},"required":["token","user","isNewUser"],"additionalProperties":false}},"required":["success"]}}}},"201":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"taxNumber":{"type":"string","nullable":true},"taxOffice":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"subdivision":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true}},"required":["id","email","name"],"additionalProperties":false},"isNewUser":{"type":"boolean"}},"required":["token","user","isNewUser"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/users/login":{"post":{"summary":"Login with email/password","tags":["User"],"description":"Authenticates user with email and password. Returns JWT token. OAuth users cannot login with password.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":6}},"required":["email","password"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"taxNumber":{"type":"string","nullable":true},"taxOffice":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"subdivision":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true}},"required":["id","email","name"],"additionalProperties":false},"suggestMobileApp":{"type":"boolean"},"subscription":{"type":"object","properties":{"isValid":{"type":"boolean"},"planId":{"type":"string","nullable":true},"status":{"type":"string"},"provider":{"type":"string","nullable":true},"endDate":{"type":"string","nullable":true}},"required":["isValid","planId","status","provider","endDate"],"additionalProperties":false}},"required":["token"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/users/forgot-password":{"post":{"summary":"Request password reset link","tags":["User"],"description":"Sends a password reset link to the email. Always returns success to prevent email enumeration. Link expires in 1 hour.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email"}},"required":["email"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}}}}},"/users/reset-password":{"post":{"summary":"Reset password with token","tags":["User"],"description":"Reset password using the token from the reset link sent to email. Token is 64 characters and can only be used once.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string","minLength":64,"maxLength":64},"newPassword":{"type":"string","minLength":6}},"required":["token","newPassword"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/users/me":{"get":{"summary":"Get current user","tags":["User"],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"taxNumber":{"type":"string","nullable":true},"taxOffice":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"subdivision":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true},"linkedProviders":{"type":"array","items":{"type":"string"}},"hasPassword":{"type":"boolean"},"subscription":{"type":"object","properties":{"isValid":{"type":"boolean"},"planId":{"type":"string","nullable":true},"status":{"type":"string"},"provider":{"type":"string","nullable":true},"endDate":{"type":"string","nullable":true}},"required":["isValid","planId","status","provider","endDate"],"additionalProperties":false},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","email","name","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}}}},"patch":{"summary":"Update profile","tags":["User"],"description":"Update user profile (name).","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":2},"taxNumber":{"type":"string"},"taxOffice":{"type":"string"},"address":{"type":"string"},"city":{"type":"string"},"subdivision":{"type":"string"},"phone":{"type":"string"}},"additionalProperties":false}}}},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}},"delete":{"summary":"Delete account permanently","tags":["User"],"description":"Permanently delete account and all data. Requires confirmation: \"DELETE_MY_ACCOUNT\". Email users must provide password.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string"},"confirmation":{"type":"string","enum":["DELETE_MY_ACCOUNT"]}},"required":["confirmation"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/users/search":{"get":{"summary":"Search users by exact email","tags":["User"],"description":"Search for a user by EXACT email address to share folders with. Returns empty array if not found (prevents email enumeration).","parameters":[{"schema":{"type":"string","minLength":5},"in":"query","name":"email","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false}}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/users/{userId}":{"get":{"summary":"Get user by ID","tags":["User"],"description":"Get user info by ID (for sharing preview).","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"userId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"taxNumber":{"type":"string","nullable":true},"taxOffice":{"type":"string","nullable":true},"city":{"type":"string","nullable":true},"subdivision":{"type":"string","nullable":true},"address":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true},"linkedProviders":{"type":"array","items":{"type":"string"}},"hasPassword":{"type":"boolean"},"subscription":{"type":"object","properties":{"isValid":{"type":"boolean"},"planId":{"type":"string","nullable":true},"status":{"type":"string"},"provider":{"type":"string","nullable":true},"endDate":{"type":"string","nullable":true}},"required":["isValid","planId","status","provider","endDate"],"additionalProperties":false},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","email","name","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/users/me/change-password":{"post":{"summary":"Change password","tags":["User"],"description":"Change password (email/password users only). OAuth users cannot change password.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"currentPassword":{"type":"string","minLength":6},"newPassword":{"type":"string","minLength":6}},"required":["currentPassword","newPassword"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/users/me/deactivate":{"post":{"summary":"Deactivate account","tags":["User"],"description":"Deactivate account (soft delete). Anonymizes user data but keeps records. Email users must provide password.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string"}},"additionalProperties":false}}}},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/auth/google":{"post":{"summary":"Google ile giriş yap","tags":["OAuth"],"description":"Google ID token ile kullanıcı girişi veya kaydı yapar","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"idToken":{"type":"string"}},"required":["idToken"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"}},"required":["id","email","name"],"additionalProperties":false},"isNewUser":{"type":"boolean"}},"required":["token","user","isNewUser"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/auth/apple":{"post":{"summary":"Apple ile giriş yap","tags":["OAuth"],"description":"Apple identity token ile kullanıcı girişi veya kaydı yapar","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"identityToken":{"type":"string"},"user":{"type":"object","properties":{"email":{"type":"string","format":"email"},"name":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"}},"additionalProperties":false}},"additionalProperties":false}},"required":["identityToken"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"}},"required":["id","email","name"],"additionalProperties":false},"isNewUser":{"type":"boolean"}},"required":["token","user","isNewUser"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/folders/":{"get":{"summary":"List folders","tags":["Folder"],"description":"Get all folders for the current user. Supports pagination and filtering.","parameters":[{"schema":{"type":"string","enum":["true","false"]},"in":"query","name":"flat","required":false},{"schema":{"type":"string"},"in":"query","name":"cursor","required":false},{"schema":{"type":"number"},"in":"query","name":"limit","required":false},{"schema":{"type":"string"},"in":"query","name":"search","required":false},{"schema":{"type":"string"},"in":"query","name":"parentId","required":false},{"schema":{"type":"string"},"in":"query","name":"from","required":false},{"schema":{"type":"string"},"in":"query","name":"to","required":false},{"schema":{"type":"string"},"in":"query","name":"color","required":false},{"schema":{"type":"string"},"in":"query","name":"icon","required":false}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"userId":{"type":"string","format":"uuid"},"parentId":{"type":"string","format":"uuid","nullable":true},"isSystem":{"type":"boolean"},"systemType":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"requiresApproval":{"type":"boolean"},"allowedTypeIds":{"type":"array","items":{"type":"string"}},"allowedTransactionTypes":{"type":"array","items":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}},"children":{"type":"array","items":{}}},"required":["id","name","icon","color","userId","parentId","createdAt","updatedAt"],"additionalProperties":false}},"hasMore":{"type":"boolean"},"nextCursor":{"type":"string","nullable":true}},"required":["items","hasMore","nextCursor"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}},"post":{"summary":"Create folder","tags":["Folder"],"description":"Create a new folder.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"icon":{"type":"string","minLength":1},"color":{"type":"string","minLength":1},"parentId":{"type":"string","format":"uuid","nullable":true},"requiresApproval":{"type":"boolean"},"allowedTypeIds":{"type":"array","items":{"type":"string"}},"allowedTransactionTypes":{"type":"array","items":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}}},"required":["name","icon","color"],"additionalProperties":false}}},"required":true},"responses":{"201":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"userId":{"type":"string","format":"uuid"},"parentId":{"type":"string","format":"uuid","nullable":true},"isSystem":{"type":"boolean"},"systemType":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"requiresApproval":{"type":"boolean"},"allowedTypeIds":{"type":"array","items":{"type":"string"}},"allowedTransactionTypes":{"type":"array","items":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}}},"required":["id","name","icon","color","userId","parentId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}}}}},"/folders/system":{"get":{"summary":"List system folders","tags":["Folder"],"description":"Get all system folders (Inbox, Trash, etc.) for the current user.","responses":{"200":{"description":"Default Response"}}}},"/folders/{id}":{"get":{"summary":"Get folder by ID","tags":["Folder"],"description":"Get a specific folder by ID.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"userId":{"type":"string","format":"uuid"},"parentId":{"type":"string","format":"uuid","nullable":true},"isSystem":{"type":"boolean"},"systemType":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"requiresApproval":{"type":"boolean"},"allowedTypeIds":{"type":"array","items":{"type":"string"}},"allowedTransactionTypes":{"type":"array","items":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}},"children":{"type":"array","items":{}}},"required":["id","name","icon","color","userId","parentId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}},"put":{"summary":"Update folder","tags":["Folder"],"description":"Update an existing folder.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"icon":{"type":"string","minLength":1},"color":{"type":"string","minLength":1},"parentId":{"type":"string","format":"uuid","nullable":true},"requiresApproval":{"type":"boolean"},"allowedTypeIds":{"type":"array","items":{"type":"string"}},"allowedTransactionTypes":{"type":"array","items":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"userId":{"type":"string","format":"uuid"},"parentId":{"type":"string","format":"uuid","nullable":true},"isSystem":{"type":"boolean"},"systemType":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"requiresApproval":{"type":"boolean"},"allowedTypeIds":{"type":"array","items":{"type":"string"}},"allowedTransactionTypes":{"type":"array","items":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}}},"required":["id","name","icon","color","userId","parentId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}},"delete":{"summary":"Delete folder","tags":["Folder"],"description":"Delete a folder. System folders cannot be deleted.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/folder-shares/":{"post":{"summary":"Share a folder","tags":["Folder Sharing"],"description":"Share a folder with another user by email. Permission levels: VIEW (read-only), EDIT (modify), CREATE (add new), FULL (all including delete).","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"folderId":{"type":"string","format":"uuid"},"targetUserId":{"type":"string","format":"uuid"},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"],"default":"VIEW"}},"required":["folderId","targetUserId"],"additionalProperties":false}}},"required":true},"responses":{"201":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"folderName":{"type":"string"},"sharedBy":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"sharedWith":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"status":{"type":"string","enum":["pending","accepted","rejected"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","folderId","folderName","sharedBy","sharedWith","permission","status","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/folder-shares/shared-with-me":{"get":{"summary":"Get folders shared with me","tags":["Folder Sharing"],"description":"List all folders that other users have shared with you. Filter by status (pending/accepted/rejected).","parameters":[{"schema":{"type":"string","enum":["pending","accepted","rejected"]},"in":"query","name":"status","required":false},{"schema":{"type":"string"},"in":"query","name":"cursor","required":false},{"schema":{"type":"number"},"in":"query","name":"limit","required":false},{"schema":{"type":"string"},"in":"query","name":"search","required":false}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"icon":{"type":"string","nullable":true},"color":{"type":"string","nullable":true},"permission":{"type":"string"},"status":{"type":"string"},"owner":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","nullable":true},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"shareId":{"type":"string"},"attachmentCount":{"type":"number"},"createdAt":{"type":"string"}},"required":["id","name","icon","color","permission","status","owner","shareId","attachmentCount","createdAt"],"additionalProperties":false}},"hasMore":{"type":"boolean"},"nextCursor":{"type":"string","nullable":true}},"required":["items","hasMore","nextCursor"],"additionalProperties":false}},"required":["success"]}}}}}}},"/folder-shares/shared-by-me":{"get":{"summary":"Get folders I shared","tags":["Folder Sharing"],"description":"List all folders you have shared with other users.","parameters":[{"schema":{"type":"string"},"in":"query","name":"cursor","required":false},{"schema":{"type":"number"},"in":"query","name":"limit","required":false},{"schema":{"type":"string"},"in":"query","name":"search","required":false}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"folderId":{"type":"string"},"folderName":{"type":"string"},"sharedBy":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","nullable":true},"email":{"type":"string"}},"required":["id","name","email"],"additionalProperties":false},"sharedWith":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","nullable":true},"email":{"type":"string"}},"required":["id","name","email"],"additionalProperties":false},"permission":{"type":"string"},"status":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","folderId","folderName","sharedBy","sharedWith","permission","status","createdAt","updatedAt"],"additionalProperties":false}},"hasMore":{"type":"boolean"},"nextCursor":{"type":"string","nullable":true}},"required":["items","hasMore","nextCursor"],"additionalProperties":false}},"required":["success"]}}}}}}},"/folder-shares/pending-count":{"get":{"summary":"Get pending share count","tags":["Folder Sharing"],"description":"Get the count of pending share invitations (useful for notifications badge).","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"count":{"type":"number"}},"required":["count"],"additionalProperties":false}},"required":["success"]}}}}}}},"/folder-shares/folder/{folderId}":{"get":{"summary":"Get folder shares","tags":["Folder Sharing"],"description":"List all users a folder is shared with. Only folder owner can access.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"folderId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"folderName":{"type":"string"},"sharedBy":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"sharedWith":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"status":{"type":"string","enum":["pending","accepted","rejected"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","folderId","folderName","sharedBy","sharedWith","permission","status","createdAt","updatedAt"],"additionalProperties":false}}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/folder-shares/{shareId}/respond":{"patch":{"summary":"Respond to share invitation","tags":["Folder Sharing"],"description":"Accept or reject a folder share invitation.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["accepted","rejected"]}},"required":["status"],"additionalProperties":false}}},"required":true},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"shareId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"folderName":{"type":"string"},"sharedBy":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"sharedWith":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"status":{"type":"string","enum":["pending","accepted","rejected"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","folderId","folderName","sharedBy","sharedWith","permission","status","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/folder-shares/{shareId}":{"patch":{"summary":"Update share permission","tags":["Folder Sharing"],"description":"Update the permission level for an existing share. Only folder owner can update.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"status":{"type":"string","enum":["pending","accepted","rejected"]}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"shareId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"folderName":{"type":"string"},"sharedBy":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"sharedWith":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name","email"],"additionalProperties":false},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"status":{"type":"string","enum":["pending","accepted","rejected"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","folderId","folderName","sharedBy","sharedWith","permission","status","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}},"delete":{"summary":"Revoke or leave share","tags":["Folder Sharing"],"description":"Folder owner can revoke share, or shared user can leave the shared folder.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"shareId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"],"additionalProperties":false}},"required":["success"]}}}},"403":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/categories/":{"get":{"summary":"List categories","tags":["Category"],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true},"userId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","userId","createdAt","updatedAt"],"additionalProperties":false}}},"required":["success"]}}}}}},"post":{"summary":"Create category","tags":["Category"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Kategori adı"},"accountCode":{"type":"string","description":"Muhasebe hesap kodu (örn: 770.01.001)"}},"required":["name"],"additionalProperties":false}}},"required":true},"responses":{"201":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true},"userId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","userId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}}}}},"/categories/{id}":{"get":{"summary":"Get category by id","tags":["Category"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true},"userId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","userId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}},"put":{"summary":"Update category","tags":["Category"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Kategori adı"},"accountCode":{"type":"string","description":"Muhasebe hesap kodu (örn: 770.01.001)"}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true},"userId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","userId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}}}},"delete":{"summary":"Delete category","tags":["Category"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"null"}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/attachments/{id}/request-approval":{"post":{"summary":"Request approval for an attachment via email","tags":["Attachment"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["reviewerEmail"],"properties":{"reviewerEmail":{"type":"string","format":"email"}}}}},"required":true},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"}}}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/attachments/":{"get":{"summary":"List attachments with filters and pagination","tags":["Attachment"],"description":"List all attachments for the authenticated user. Supports filtering by folder, attachment type, title, amount range, currency, document date range, and text search across title, description and details fields. Uses cursor-based pagination.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"query","name":"folderId","required":false},{"schema":{"type":"string","format":"uuid"},"in":"query","name":"categoryId","required":false},{"schema":{"type":"string","format":"uuid"},"in":"query","name":"attachmentTypeId","required":false},{"schema":{"type":"string","format":"uuid"},"in":"query","name":"tagId","required":false},{"schema":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"in":"query","name":"transactionType","required":false},{"schema":{"type":"string"},"in":"query","name":"title","required":false},{"schema":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"in":"query","name":"status","required":false},{"schema":{"type":"string"},"in":"query","name":"search","required":false},{"schema":{"type":"string","format":"date-time"},"in":"query","name":"documentDateFrom","required":false},{"schema":{"type":"string","format":"date-time"},"in":"query","name":"documentDateTo","required":false},{"schema":{"type":"string","format":"date-time"},"in":"query","name":"createdAtFrom","required":false},{"schema":{"type":"string","format":"date-time"},"in":"query","name":"createdAtTo","required":false},{"schema":{"type":"string","enum":["true","false"]},"in":"query","name":"includeShared","required":false},{"schema":{"type":"string"},"in":"query","name":"detailsFilter","required":false},{"schema":{"type":"string","format":"uuid"},"in":"query","name":"cursor","required":false},{"schema":{"type":"number","minimum":1},"in":"query","name":"page","required":false},{"schema":{"type":"number","minimum":0},"in":"query","name":"skip","required":false},{"schema":{"type":"number","minimum":1,"maximum":100},"in":"query","name":"limit","required":false}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"categoryId":{"type":"string","format":"uuid","nullable":true},"attachmentTypeId":{"type":"string","format":"uuid"},"title":{"type":"string"},"description":{"type":"string","nullable":true},"documentDate":{"type":"string","format":"date-time"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"details":{"nullable":true},"status":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"rejectionReason":{"type":"string","nullable":true},"images":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"imageUrl":{"type":"string","format":"uri"},"createdAt":{"type":"string","format":"date-time"}},"required":["id","imageUrl","createdAt"],"additionalProperties":false}},"attachmentType":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"expires":{"type":"boolean"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}},"required":["id","name","icon","color","expires"],"additionalProperties":false},"folder":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"}},"required":["id","name","icon","color"],"additionalProperties":false},"category":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true}},"required":["id","name"],"additionalProperties":false},"tags":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"color":{"type":"string"}},"required":["id","name","color"],"additionalProperties":false}},"isOwner":{"type":"boolean"},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","userId","folderId","attachmentTypeId","title","description","documentDate","transactionType","status","createdAt","updatedAt"],"additionalProperties":false}},"hasMore":{"type":"boolean"},"nextCursor":{"type":"string","format":"uuid","nullable":true}},"required":["items","hasMore","nextCursor"],"additionalProperties":false}},"required":["success"]}}}}}},"post":{"summary":"Create attachment","tags":["Attachment"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"folderId":{"type":"string","format":"uuid"},"categoryId":{"type":"string","format":"uuid"},"attachmentTypeId":{"type":"string","format":"uuid"},"title":{"type":"string"},"description":{"type":"string"},"documentDate":{"type":"string","format":"date-time"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"details":{"type":"object","additionalProperties":{},"nullable":true}},"required":["folderId","attachmentTypeId","title","documentDate"],"additionalProperties":false}}},"required":true},"responses":{"201":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"categoryId":{"type":"string","format":"uuid","nullable":true},"attachmentTypeId":{"type":"string","format":"uuid"},"title":{"type":"string"},"description":{"type":"string","nullable":true},"documentDate":{"type":"string","format":"date-time"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"details":{"nullable":true},"status":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"rejectionReason":{"type":"string","nullable":true},"images":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"imageUrl":{"type":"string","format":"uri"},"createdAt":{"type":"string","format":"date-time"}},"required":["id","imageUrl","createdAt"],"additionalProperties":false}},"attachmentType":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"expires":{"type":"boolean"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}},"required":["id","name","icon","color","expires"],"additionalProperties":false},"folder":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"}},"required":["id","name","icon","color"],"additionalProperties":false},"category":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true}},"required":["id","name"],"additionalProperties":false},"tags":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"color":{"type":"string"}},"required":["id","name","color"],"additionalProperties":false}},"isOwner":{"type":"boolean"},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","userId","folderId","attachmentTypeId","title","description","documentDate","transactionType","status","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}}}}},"/attachments/{id}":{"get":{"summary":"Get attachment by id","tags":["Attachment"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"categoryId":{"type":"string","format":"uuid","nullable":true},"attachmentTypeId":{"type":"string","format":"uuid"},"title":{"type":"string"},"description":{"type":"string","nullable":true},"documentDate":{"type":"string","format":"date-time"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"details":{"nullable":true},"status":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"rejectionReason":{"type":"string","nullable":true},"images":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"imageUrl":{"type":"string","format":"uri"},"createdAt":{"type":"string","format":"date-time"}},"required":["id","imageUrl","createdAt"],"additionalProperties":false}},"attachmentType":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"expires":{"type":"boolean"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}},"required":["id","name","icon","color","expires"],"additionalProperties":false},"folder":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"}},"required":["id","name","icon","color"],"additionalProperties":false},"category":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true}},"required":["id","name"],"additionalProperties":false},"tags":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"color":{"type":"string"}},"required":["id","name","color"],"additionalProperties":false}},"isOwner":{"type":"boolean"},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","userId","folderId","attachmentTypeId","title","description","documentDate","transactionType","status","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}}}},"put":{"summary":"Update attachment","tags":["Attachment"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"folderId":{"type":"string","format":"uuid"},"categoryId":{"type":"string","format":"uuid"},"attachmentTypeId":{"type":"string","format":"uuid"},"title":{"type":"string"},"description":{"type":"string"},"documentDate":{"type":"string","format":"date-time"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"details":{"type":"object","additionalProperties":{},"nullable":true}},"additionalProperties":false}}}},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"categoryId":{"type":"string","format":"uuid","nullable":true},"attachmentTypeId":{"type":"string","format":"uuid"},"title":{"type":"string"},"description":{"type":"string","nullable":true},"documentDate":{"type":"string","format":"date-time"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"details":{"nullable":true},"status":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"rejectionReason":{"type":"string","nullable":true},"images":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"imageUrl":{"type":"string","format":"uri"},"createdAt":{"type":"string","format":"date-time"}},"required":["id","imageUrl","createdAt"],"additionalProperties":false}},"attachmentType":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"expires":{"type":"boolean"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}},"required":["id","name","icon","color","expires"],"additionalProperties":false},"folder":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"}},"required":["id","name","icon","color"],"additionalProperties":false},"category":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true}},"required":["id","name"],"additionalProperties":false},"tags":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"color":{"type":"string"}},"required":["id","name","color"],"additionalProperties":false}},"isOwner":{"type":"boolean"},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","userId","folderId","attachmentTypeId","title","description","documentDate","transactionType","status","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}}}},"delete":{"summary":"Delete attachment","tags":["Attachment"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"204":{"description":"No Content"}}}},"/attachments/{id}/status":{"patch":{"summary":"Review an attachment (Approve or Reject)","tags":["Attachment"],"description":"Allows folder owners (and users with FULL permission) to approve or reject attachments uploaded with PENDING status. Rejection requires a reason.","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["APPROVED","REJECTED"]},"rejectionReason":{"type":"string"}}}}},"required":true},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"},"categoryId":{"type":"string","format":"uuid","nullable":true},"attachmentTypeId":{"type":"string","format":"uuid"},"title":{"type":"string"},"description":{"type":"string","nullable":true},"documentDate":{"type":"string","format":"date-time"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"details":{"nullable":true},"status":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"rejectionReason":{"type":"string","nullable":true},"images":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"imageUrl":{"type":"string","format":"uri"},"createdAt":{"type":"string","format":"date-time"}},"required":["id","imageUrl","createdAt"],"additionalProperties":false}},"attachmentType":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"},"expires":{"type":"boolean"},"transactionType":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]}},"required":["id","name","icon","color","expires"],"additionalProperties":false},"folder":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"icon":{"type":"string"},"color":{"type":"string"}},"required":["id","name","icon","color"],"additionalProperties":false},"category":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"accountCode":{"type":"string","nullable":true}},"required":["id","name"],"additionalProperties":false},"tags":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"color":{"type":"string"}},"required":["id","name","color"],"additionalProperties":false}},"isOwner":{"type":"boolean"},"permission":{"type":"string","enum":["VIEW","EDIT","CREATE","FULL"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","userId","folderId","attachmentTypeId","title","description","documentDate","transactionType","status","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"403":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/attachment-types/":{"get":{"summary":"List attachment types","tags":["AttachmentType"],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string","description":"Unique identifier key (e.g. invoice, receipt)"},"label":{"type":"string","description":"Translated display name (e.g. Fatura, Fiş)"},"icon":{"type":"string"},"color":{"type":"string"},"expires":{"type":"boolean"},"transactionType":{"type":"object","properties":{"name":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"label":{"type":"string","description":"Translated transaction type (e.g. Gider, Gelir)"}},"required":["name","label"],"additionalProperties":false},"fieldConfig":{"type":"array","items":{"type":"object","properties":{"key":{"type":"string"},"label":{"type":"string"},"type":{"type":"string","enum":["text","number","date","select","textarea","duration"]},"required":{"type":"boolean"},"placeholder":{"type":"string"},"unit":{"type":"string"},"options":{"type":"array","items":{"type":"string"}},"defaultValue":{},"filterable":{"type":"boolean"},"filterType":{"type":"string","enum":["text","number","date","dateRange","select","amount"]}},"required":["key","label","type"],"additionalProperties":false},"nullable":true},"defaultDetails":{"type":"object","additionalProperties":{},"nullable":true},"fieldStyle":{"type":"object","properties":{"mobile":{"type":"object","properties":{"gridTemplateAreas":{"type":"array","items":{"type":"string"}},"gap":{"type":"string"}},"required":["gridTemplateAreas"],"additionalProperties":false},"desktop":{"type":"object","properties":{"gridTemplateAreas":{"type":"array","items":{"type":"string"}},"gap":{"type":"string"}},"required":["gridTemplateAreas"],"additionalProperties":false}},"additionalProperties":false,"nullable":true}},"required":["id","name","label","icon","color","expires","transactionType"],"additionalProperties":false}}},"required":["success"]}}}}}}},"/files/presigned-url":{"post":{"summary":"Get presigned URL for file upload","tags":["Files"],"description":"Returns a presigned URL for uploading files (images, PDFs, documents) to R2. Supported types: JPEG, PNG, GIF, WebP, HEIC, PDF, Word, Excel.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"filename":{"type":"string","minLength":1},"contentType":{"type":"string"}},"required":["filename","contentType"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"uploadUrl":{"type":"string","format":"uri"},"key":{"type":"string"}},"required":["uploadUrl","key"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}}}}},"/files/":{"post":{"summary":"Save file to attachment","tags":["Files"],"description":"Saves a file key to an attachment after upload. Validates ownership and key prefix.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"attachmentId":{"type":"string","format":"uuid"},"key":{"type":"string","minLength":1}},"required":["attachmentId","key"],"additionalProperties":false}}},"required":true},"responses":{"201":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"attachmentId":{"type":"string","format":"uuid"},"key":{"type":"string"},"viewUrl":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}},"required":["id","attachmentId","key","viewUrl","createdAt"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}},"403":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/files/attachment/{attachmentId}":{"get":{"summary":"Get files for attachment","tags":["Files"],"description":"Returns all files for a specific attachment with view URLs, filenames and content types. Validates ownership.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"attachmentId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"attachmentId":{"type":"string","format":"uuid"},"viewUrl":{"type":"string"},"filename":{"type":"string"},"contentType":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}},"required":["id","attachmentId","viewUrl","filename","createdAt"],"additionalProperties":false}}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/files/{fileId}/view":{"get":{"summary":"View file","tags":["Files"],"description":"Streams the file directly for viewing. Validates ownership before serving. PDFs open inline in browser.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"fileId","required":true}],"responses":{"404":{"description":"Default Response","content":{"image/jpeg":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/png":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/gif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/webp":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heic":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/pdf":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/msword":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.ms-excel":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"500":{"description":"Default Response","content":{"image/jpeg":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/png":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/gif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/webp":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heic":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/pdf":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/msword":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.ms-excel":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/files/{fileId}/download":{"get":{"summary":"Download file","tags":["Files"],"description":"Downloads the file as attachment (forces download dialog in browser). Validates ownership.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"fileId","required":true}],"responses":{"404":{"description":"Default Response","content":{"image/jpeg":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/png":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/gif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/webp":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heic":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/pdf":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/msword":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.ms-excel":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"500":{"description":"Default Response","content":{"image/jpeg":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/png":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/gif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/webp":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heic":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"image/heif":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/pdf":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/msword":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.ms-excel":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/files/{fileId}":{"delete":{"summary":"Delete file","tags":["Files"],"description":"Deletes a file from storage and database. Validates ownership.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"fileId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"],"additionalProperties":false}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/subscription/verify":{"post":{"summary":"Doğrulama ve abonelik güncelleme","tags":["Subscription"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"forceSync":{"type":"boolean"}},"additionalProperties":false}}}},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"isValid":{"type":"boolean"},"status":{"type":"string"},"planId":{"type":"string","nullable":true},"provider":{"type":"string","nullable":true},"subscriptionEndDate":{"type":"string","format":"date-time","nullable":true}},"required":["isValid","status","planId","provider","subscriptionEndDate"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/notifications/":{"get":{"summary":"Get notifications","tags":["Notifications"],"description":"Get user notifications with pagination. Use unreadOnly=true to filter.","parameters":[{"schema":{"type":"string"},"in":"query","name":"unreadOnly","required":false},{"schema":{"type":"string"},"in":"query","name":"limit","required":false},{"schema":{"type":"string"},"in":"query","name":"cursor","required":false}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"type":{"type":"string","enum":["FOLDER_SHARE_INVITE","FOLDER_SHARE_ACCEPTED","FOLDER_SHARE_REJECTED","SYSTEM"]},"title":{"type":"string"},"body":{"type":"string"},"referenceId":{"type":"string","nullable":true},"referenceType":{"type":"string","nullable":true},"isRead":{"type":"boolean"},"data":{"nullable":true},"createdAt":{"type":"string","format":"date-time"}},"required":["id","type","title","body","referenceId","referenceType","isRead","createdAt"],"additionalProperties":false}},"unreadCount":{"type":"integer"}},"required":["items","unreadCount"],"additionalProperties":false}},"required":["success"]}}}}}}},"/notifications/unread-count":{"get":{"summary":"Get unread count","tags":["Notifications"],"description":"Get count of unread notifications (for badge).","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"count":{"type":"integer"}},"required":["count"],"additionalProperties":false}},"required":["success"]}}}}}}},"/notifications/mark-read":{"post":{"summary":"Mark as read","tags":["Notifications"],"description":"Mark specific notifications or all as read.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"notificationIds":{"type":"array","items":{"type":"string","format":"uuid"}}},"additionalProperties":false}}}},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"additionalProperties":false}},"required":["success"]}}}}}}},"/notifications/{notificationId}/read":{"patch":{"summary":"Mark one as read","tags":["Notifications"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"notificationId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"additionalProperties":false}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/notifications/{notificationId}":{"delete":{"summary":"Delete notification","tags":["Notifications"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"notificationId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"],"additionalProperties":false}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/notifications/read":{"delete":{"summary":"Delete read notifications","tags":["Notifications"],"description":"Delete all read notifications.","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"],"additionalProperties":false}},"required":["success"]}}}}}}},"/notifications/register-push-token":{"post":{"summary":"Register Expo push token","tags":["Notifications"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"expoPushToken":{"type":"string"},"platform":{"type":"string","enum":["ios","android","web"]}},"required":["expoPushToken"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number","example":400},"error":{"type":"string","example":"Validation Error"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message","details"]}}}}}}},"/notifications/test":{"post":{"summary":"Send test notification","tags":["Notifications"],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"additionalProperties":false}},"required":["success"]}}}}}}},"/web/qr/generate":{"post":{"summary":"Generate QR session for web login","tags":["Web Session"],"description":"Creates a QR session that web app displays. Mobile scans and confirms. QR expires in 3 minutes.","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"sessionId":{"type":"string","description":"Unique session ID"},"sessionCode":{"type":"string","description":"Code embedded in QR"},"qrData":{"type":"string","description":"JSON data to encode in QR"},"expiresAt":{"type":"string","format":"date-time","description":"QR expiration time"},"deviceInfo":{"type":"object","properties":{"browser":{"type":"string"},"os":{"type":"string"},"deviceName":{"type":"string"}}}}}},"required":["success"]}}}}}}},"/web/qr/status/{sessionCode}":{"get":{"summary":"Check QR session status","tags":["Web Session"],"description":"Web app polls this endpoint every 2 seconds to check if mobile confirmed the login.","parameters":[{"schema":{"type":"string"},"in":"path","name":"sessionCode","required":true,"description":"Session code from QR"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"status":{"type":"string","enum":["pending","confirmed","expired"],"description":"Current session status"},"token":{"type":"string","description":"JWT token (only when confirmed)"},"userId":{"type":"string","description":"User ID (only when confirmed)"}}}},"required":["success"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/web/qr/confirm":{"post":{"summary":"Confirm QR session from mobile","tags":["Web Session"],"description":"Mobile app calls this after scanning QR code to authorize web login. Creates a new web session.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"sessionCode":{"type":"string","description":"Session code scanned from QR"}},"required":["sessionCode"]}}},"required":true},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"deviceInfo":{"type":"object","properties":{"deviceName":{"type":"string","description":"Web browser device name"},"ipAddress":{"type":"string","description":"Web client IP address"}}}}}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/web/sessions":{"get":{"summary":"List active web sessions","tags":["Web Session"],"description":"Returns all active web sessions for the authenticated user. Use this to show connected devices.","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"sessions":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","description":"Session ID"},"deviceName":{"type":"string","description":"e.g., Chrome on Windows"},"deviceType":{"type":"string","description":"web or mobile"},"browser":{"type":"string","description":"Browser name"},"os":{"type":"string","description":"Operating system"},"ipAddress":{"type":"string","description":"Client IP address"},"lastActiveAt":{"type":"string","format":"date-time","description":"Last activity time"},"createdAt":{"type":"string","format":"date-time","description":"Session creation time"}}}}}}},"required":["success"]}}}}}}},"/web/sessions/current":{"delete":{"summary":"Revoke current web session","tags":["Web Session"],"description":"Logs out the current web session regardless of session ID.","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"}}}},"required":["success"]}}}}}}},"/web/sessions/{sessionId}":{"delete":{"summary":"Revoke a web session","tags":["Web Session"],"description":"Logs out a specific web session. Restricted to mobile users.","parameters":[{"schema":{"type":"string"},"in":"path","name":"sessionId","required":true,"description":"Session ID to revoke"}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"},"deviceName":{"type":"string","description":"Revoked device name"}}}},"required":["success"]}}}},"403":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/web/sessions/revoke-all":{"post":{"summary":"Revoke all web sessions","tags":["Web Session"],"description":"Logs out all web sessions. Optionally exclude current session to stay logged in.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"exceptSessionId":{"type":"string","description":"Session ID to keep active (optional)"}}}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"message":{"type":"string"},"count":{"type":"number","description":"Number of sessions revoked"}}}},"required":["success"]}}}}}}},"/ai/scan-document":{"post":{"summary":"Scan document with AI","tags":["AI"],"description":"\nAnalyzes a document (image or PDF) using Gemini AI and extracts structured data.\n\n**Desteklenen Formatlar:**\n- **Görsel:** JPEG, PNG, GIF, WebP\n- **PDF:** application/pdf (çok sayfalı belgeler desteklenir)\n- **NOT:** DOC/DOCX dosyaları desteklenmez, önce PDF'e dönüştürün\n\n**Boyut Limitleri:**\n- Görseller: maksimum 5MB\n- PDF: maksimum 10MB\n\n**Rate Limits:**\n- 10 requests per minute\n- 100 requests per day\n\n**Request:**\n- `files` veya `file`: Base64 encoded dosya(lar) (görsel veya PDF). \n  - Tek dosya için string, çok sayfalı/parçalı belgeler için string array gönderebilirsiniz.\n  - `images` ve `image` alanları da desteklenir.\n- `mimeType`: Dosya MIME tipi (opsiyonel, varsayılan: image/jpeg)\n  - Desteklenen: image/jpeg, image/png, image/gif, image/webp, application/pdf\n- `attachmentTypeId`: Verilirse, AI o tipe özel alanları çıkarır\n\n**Response:**\n- `suggestedType`: Algılanan belge tipi ve güven skoru\n- `suggestedTitle`: Önerilen başlık\n- `suggestedDate`: Belge tarihi (ISO format)\n- `extractedDetails`: AttachmentType fieldConfig'e uygun key-value çiftleri\n\n**Kullanım:**\n1. attachmentTypeId olmadan: AI belge tipini otomatik algılar\n2. attachmentTypeId ile: Bilinen tip için daha doğru alan çıkarımı\n      ","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"files":{"type":"array","items":{"type":"string"}},"image":{"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"images":{"type":"array","items":{"type":"string"}},"mimeType":{"type":"string","enum":["image/jpeg","image/png","image/gif","image/webp","application/pdf"],"description":"Dosya MIME tipi. Desteklenen formatlar: image/jpeg, image/png, image/gif, image/webp, application/pdf. Varsayılan: image/jpeg"},"attachmentTypeId":{"type":"string","format":"uuid"},"folderId":{"type":"string","format":"uuid"}},"additionalProperties":false}}}},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"suggestedType":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"confidence":{"type":"number","minimum":0,"maximum":1}},"required":["id","name","confidence"],"additionalProperties":false,"nullable":true},"suggestedTitle":{"type":"string","nullable":true},"suggestedDescription":{"type":"string","nullable":true},"suggestedDate":{"type":"string","nullable":true},"extractedDetails":{"type":"object","additionalProperties":{}},"rawText":{"type":"string","nullable":true}},"required":["suggestedType","suggestedTitle","suggestedDescription","suggestedDate","extractedDetails","rawText"],"additionalProperties":false}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"429":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"statusCode":{"type":"number"},"error":{"type":"string"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object"}}},"required":["success","statusCode","error","message"]}}}}}}},"/webhooks/":{"get":{"summary":"List webhooks","tags":["Webhook"],"responses":{"200":{"description":"Default Response"}}},"post":{"summary":"Create webhook","tags":["Webhook"],"responses":{"200":{"description":"Default Response"}}}},"/webhooks/{id}":{"patch":{"summary":"Update webhook","tags":["Webhook"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}},"delete":{"summary":"Delete webhook","tags":["Webhook"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/webhooks/{id}/logs":{"get":{"summary":"List webhook logs","tags":["Webhook"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/revenuecat/webhook":{"post":{"summary":"RevenueCat Webhook","tags":["Webhooks"],"description":"Receives subscription updates from RevenueCat","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"}}}}}}}}},"/config/":{"get":{"summary":"Get application configuration","tags":["Config"],"description":"Returns initial app configuration including location, language, settings, and pricing.","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"location":{"type":"object","properties":{"ip":{"type":"string"},"country":{"type":"string"},"city":{"type":"string"},"timezone":{"type":"string"}},"required":["ip","country"],"additionalProperties":false},"settings":{"type":"object","properties":{"language":{"type":"string"},"currency":{"type":"string"},"currencySymbol":{"type":"string"},"theme":{"type":"string"},"features":{"type":"object","additionalProperties":{"type":"boolean"}}},"required":["language","currency","currencySymbol","theme","features"],"additionalProperties":false},"pricing":{"type":"object","properties":{"currency":{"type":"string"},"symbol":{"type":"string"},"plans":{"type":"object","properties":{"individual":{"type":"object","properties":{"monthly":{"type":"object","properties":{"price":{"type":"number"},"id":{"type":"string"}},"required":["price","id"],"additionalProperties":false},"yearly":{"type":"object","properties":{"price":{"type":"number"},"id":{"type":"string"}},"required":["price","id"],"additionalProperties":false},"items":{"type":"array","items":{"type":"string"}}},"required":["monthly","yearly","items"],"additionalProperties":false},"team":{"type":"object","properties":{"monthly":{"type":"object","properties":{"price":{"type":"number"},"id":{"type":"string"}},"required":["price","id"],"additionalProperties":false},"yearly":{"type":"object","properties":{"price":{"type":"number"},"id":{"type":"string"}},"required":["price","id"],"additionalProperties":false},"items":{"type":"array","items":{"type":"string"}}},"required":["monthly","yearly","items"],"additionalProperties":false}},"required":["individual","team"],"additionalProperties":false}},"required":["currency","symbol","plans"],"additionalProperties":false}},"required":["location","settings","pricing"],"additionalProperties":false}},"required":["success"]}}}}}}},"/collaboration/comments":{"post":{"summary":"Add a comment to an attachment","tags":["Collaboration"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"attachmentId":{"type":"string","format":"uuid"},"text":{"type":"string","minLength":1}},"required":["attachmentId","text"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"text":{"type":"string"},"userId":{"type":"string","format":"uuid"},"attachmentId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name"],"additionalProperties":false}},"required":["id","text","userId","attachmentId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}}}}},"/collaboration/comments/{attachmentId}":{"get":{"summary":"Get comments for an attachment","tags":["Collaboration"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"attachmentId","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"text":{"type":"string"},"userId":{"type":"string","format":"uuid"},"attachmentId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string","format":"email"}},"required":["id","name"],"additionalProperties":false}},"required":["id","text","userId","attachmentId","createdAt","updatedAt"],"additionalProperties":false}}},"required":["success"]}}}}}}},"/collaboration/comments/{id}":{"delete":{"summary":"Delete a comment","tags":["Collaboration"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"additionalProperties":false}}}}}}},"/collaboration/tags":{"post":{"summary":"Create a new tag","tags":["Collaboration"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":50},"color":{"type":"string","pattern":"^#[0-9a-fA-F]{6}$","default":"#3B82F6"}},"required":["name"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"color":{"type":"string"},"userId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","color","userId","createdAt","updatedAt"],"additionalProperties":false}},"required":["success"]}}}}}},"get":{"summary":"List user tags","tags":["Collaboration"],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"color":{"type":"string"},"userId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","color","userId","createdAt","updatedAt"],"additionalProperties":false}}},"required":["success"]}}}}}}},"/collaboration/tags/attach":{"post":{"summary":"Attach a tag to a document","tags":["Collaboration"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"attachmentId":{"type":"string","format":"uuid"},"tagId":{"type":"string","format":"uuid"}},"required":["attachmentId","tagId"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"additionalProperties":false}}}}}}},"/collaboration/tags/detach":{"post":{"summary":"Remove a tag from a document","tags":["Collaboration"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"attachmentId":{"type":"string","format":"uuid"},"tagId":{"type":"string","format":"uuid"}},"required":["attachmentId","tagId"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"additionalProperties":false}}}}}}},"/collaboration/audit-logs/{attachmentId}":{"get":{"summary":"Get audit logs for an attachment","tags":["Collaboration"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"attachmentId","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/export/formats":{"get":{"tags":["Export"],"description":"List available export formats","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"},"type":{"type":"string","enum":["single","bulk"]},"extension":{"type":"string"}},"required":["code","name","type","extension"],"additionalProperties":false}}},"required":["success"]}}}}}}},"/export/attachment/{id}":{"get":{"tags":["Export"],"description":"Export a single attachment in specific format (UBL-TR, ZUGFeRD, JSON, etc.)","parameters":[{"schema":{"type":"string","enum":["TR_UBL","DE_ZUGFERD","JSON","CSV","XML","EXCEL"]},"in":"query","name":"format","required":true,"description":"Export format code"},{"schema":{"type":"string"},"in":"query","name":"fieldMapping","required":false,"description":"JSON string mapping fields (e.g. {\"amount\": \"custom_price\"})"},{"schema":{"type":"string"},"in":"query","name":"selectedFields","required":false,"description":"JSON array of field keys to include (e.g. [\"id\", \"amount\"])"},{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/export/attachments":{"get":{"tags":["Export"],"description":"Export matching attachments to Excel, CSV, JSON, etc.","parameters":[{"schema":{"type":"string","format":"uuid"},"in":"query","name":"folderId","required":false},{"schema":{"type":"string","format":"uuid"},"in":"query","name":"categoryId","required":false},{"schema":{"type":"string","format":"uuid"},"in":"query","name":"attachmentTypeId","required":false},{"schema":{"type":"string","enum":["INCOME","EXPENSE","NEUTRAL"]},"in":"query","name":"transactionType","required":false},{"schema":{"type":"string"},"in":"query","name":"title","required":false},{"schema":{"type":"string"},"in":"query","name":"search","required":false},{"schema":{"type":"string","format":"date-time"},"in":"query","name":"documentDateFrom","required":false},{"schema":{"type":"string","format":"date-time"},"in":"query","name":"documentDateTo","required":false},{"schema":{"type":"string"},"in":"query","name":"includeShared","required":false},{"schema":{"type":"string"},"in":"query","name":"includeSubfolders","required":false,"description":"Set to \"true\" to include subfolders when folderId is present"},{"schema":{"type":"string","enum":["TR_EXCEL","DE_DATEV","JSON","CSV","XML","EXCEL"]},"in":"query","name":"format","required":true,"description":"Export format code"},{"schema":{"type":"string"},"in":"query","name":"fieldMapping","required":false,"description":"JSON string mapping fields (e.g. {\"amount\": \"custom_price\"})"},{"schema":{"type":"string"},"in":"query","name":"selectedFields","required":false,"description":"JSON array of field keys to include (e.g. [\"id\", \"amount\"])"}],"responses":{"200":{"description":"Default Response"}}}},"/inbound-email/":{"post":{"summary":"Handle inbound email from Cloudflare","tags":["Webhook"],"description":"Receives email sender and R2 attachment paths to create attachments in user Inbox.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"sender":{"type":"string"},"subject":{"type":"string"},"files":{"type":"array","items":{"type":"object","properties":{"key":{"type":"string"},"filename":{"type":"string"},"contentType":{"type":"string"},"size":{"type":"number"}}}}}}}}},"responses":{"200":{"description":"Default Response"}}}},"/dev/token":{"post":{"summary":"Get development token","tags":["Dev"],"description":"Generates a JWT token for testing purposes. Only available in non-production environments.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email"}},"required":["email"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string"},"data":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string","nullable":true}},"required":["id","email","name"],"additionalProperties":false}},"required":["token","user"],"additionalProperties":false}},"required":["success"]}}}}}}}},"security":[{"bearerAuth":[]}]}